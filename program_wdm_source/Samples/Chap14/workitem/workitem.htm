<HTML>
<HEAD>
<TITLE>The WORKITEM Sample</TITLE>
</HEAD>
<BODY>

<H2>The WORKITEM Sample</H2>
<P>The WORKITEM Sample accompanies Chapter 14 and illustrates how to use IoQueueWorkItem and related routines to queue a work item. This sample was revised for SP-2 in the 1st edition.</P>
<P>The sample includes two components:</P>

<UL>
<LI>WORKITEM.SYS (SYS subdirectory) is a WDM driver for a non-existent hardware device. </LI>
<LI>TEST.EXE (TEST subdirectory) is a Win32 console program that tests WORKITEM.SYS.</LI></UL>

<H3>Building WORKITEM</H3>
<P>To build WORKITEM.SYS, follow the <A HREF="../../wdmbook.htm#wdmbuild">general instructions for building a WDM sample</A>. The Microsoft Visual C++ project file is named WORKITEM.DSP.</P>
<P>To build TEST.EXE, follow the <A HREF="../../wdmbook.htm#usermodebuild">general instructions for building user-mode programs</A>. The Microsoft Visual C++ project file is named TEST.DSP in the TEST subdirectory.</P>
<H3>Testing WORKITEM</H3>
<P>First install the WORKITEM.SYS driver. Follow the general instructions for using <A HREF="../../wdmbook.htm#fastinst">FastInst</A> in Windows XP or Windows 98/Me. The INF file is named SYS\WORKITEM.INF.</P>
<P>Open a command prompt and execute TEST.EXE from the TEST\DEBUG subdirectory. TEST will call WORKITEM to queue a work item that should complete almost immediately and report back to TEST. TEST prints a message to indicate the results.</P>

<h3>What to look for</h3>
<p>The handler for IOCTL_SUBMIT_ITEM (Control.cpp) illustrates how to queue a work item. The callback
routine, <b>WorkItemCallback</b> is also located in Control.cpp.</p>

</BODY>
</HTML>
